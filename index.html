<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Morning Buddy Pro ğŸ’•</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#ff9aa5" />
</head>
<body>
  <!-- Background + floating decor -->
  <div class="bg"></div>
  <div class="float heart h1">ğŸ’–</div>
  <div class="float butterfly b1">ğŸ¦‹</div>

  <div class="app">
    <!-- Header -->
    <header class="header">
      <h1 class="app-title">Morning Buddy ğŸŒ¸</h1>
      <p class="tag">A cute wake-up world just for her ğŸ’•</p>
    </header>

    <!-- HOME SCREEN -->
    <section id="screen-home" class="screen active-screen">
      <div class="card mascot-card">
        <div class="mascot-avatar">ğŸŒ¸</div>
        <div class="mascot-content">
          <div id="mascotMessage">Good morning! Iâ€™m proud of you ğŸ’•</div>
        </div>
        <div class="mascot-actions">
          <button class="btn small" onclick="rotateMascotMessage()">Refresh âœ¨</button>
        </div>
      </div>

      <div class="card vibe-card">
        <h2>Today's Vibe</h2>
        <p id="goalStatus">ğŸŒ… Your Goal: -- | ğŸ‘¸ Her Goal: --</p>
        <p id="homeStreakSummary">No streak yetâ€¦ your first morning will already be special ğŸ’–</p>
      </div>

      <div class="card message-card">
        <h3>ğŸ˜ Cute Message</h3>
        <div id="messageBox">Wake up, sleepy queen ğŸ’–</div>
        <div class="center">
          <button class="btn neon" onclick="sendMessage()">Send a smile ğŸ’Œ</button>
        </div>
      </div>

      <div class="card actions-card">
        <div class="row">
          <button class="btn" onclick="increaseMyStreak()">I woke up â˜€ï¸</button>
          <button class="btn" onclick="increaseFriendStreak()">She woke up ğŸ‘¸</button>
        </div>
      </div>

      <div class="card stats-card">
        <div class="battle">
          <div id="battleText">Start your morning battle âš”ï¸</div>
          <div class="battle-bar">
            <div id="meBar" class="bar me"></div>
            <div id="friendBar" class="bar her"></div>
          </div>
        </div>
        <div class="streaks">
          <div>You: <span id="myStreakText">ğŸ”¥ 0</span></div>
          <div>Her: <span id="friendStreakText">ğŸ”¥ 0</span></div>
          <div id="comboStreakText"></div>
        </div>
      </div>

      <div class="card charts-card">
        <h4>7-day Wake-up Chart</h4>
        <canvas id="progressChart" width="400" height="120"></canvas>
      </div>

      <div class="card study-card">
        <h4>Study Tracker</h4>
        <div class="study-inputs">
          <input id="myStudyInput" type="number" step="0.5" placeholder="Your hours" />
          <button class="btn" onclick="saveMyStudy()">Save</button>
          <input id="friendStudyInput" type="number" step="0.5" placeholder="Her hours" />
          <button class="btn" onclick="saveFriendStudy()">Save</button>
        </div>
        <div class="study-summary">
          <div id="myStudyHoursText">0 h</div>
          <div id="friendStudyHoursText">0 h</div>
        </div>
        <canvas id="studyChart" width="400" height="120"></canvas>
      </div>

      <div class="card calendar-card">
        <h4>Calendar</h4>
        <div id="calendarHeader" class="calendar-header"></div>
        <div id="calendarGrid" class="calendar-grid"></div>
      </div>

      <div class="card badges-card">
        <h4>Rewards</h4>
        <div id="badgeList" class="badge-list"></div>
      </div>

    </section>

    <!-- GOALS SCREEN (hidden by default) -->
    <section id="screen-goals" class="screen">
      <div class="card">
        <h3>Set Wake-up Goals</h3>
        <input id="myGoal" type="time" />
        <input id="friendGoal" type="time" />
        <div class="row">
          <button class="btn" onclick="saveGoals()">Save Goals</button>
        </div>
      </div>

      <div class="card">
        <h3>Alarm</h3>
        <input id="alarmTime" type="time" />
        <div class="row">
          <button class="btn" onclick="saveAlarmTime()">Save Alarm</button>
          <div id="alarmSavedText"></div>
        </div>
      </div>

    </section>

    <!-- NAVIGATION -->
    <nav class="tabs">
      <button class="tab-btn active" onclick="showScreen('home', this)">ğŸ  Home</button>
      <button class="tab-btn" onclick="showScreen('goals', this)">ğŸ¯ Goals</button>
      <button class="tab-btn" onclick="showScreen('study', this)">ğŸ“š Study</button>
      <button class="tab-btn" onclick="showScreen('progress', this)">ğŸ“ˆ Progress</button>
      <button class="tab-btn" onclick="resetStreaks()">ğŸ” Reset</button>
    </nav>

  </div>

  <!-- Reset modal -->
  <div id="resetModal" class="modal" style="display:none;">
    <div class="modal-content">
      <p>This will reset all streaks and study logs.</p>
      <div class="modal-buttons">
        <button class="btn neon" onclick="confirmReset()">Yes, reset ğŸ’–</button>
        <button class="btn stop" onclick="closeResetModal()">No, keep it ğŸ’•</button>
      </div>
    </div>
  </div>

  <!-- External libs (order matters) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.5/lottie.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

  <!-- Main app script (your script.js) -->
  <script src="script.js?v=4"></script>

  <!-- Service worker registration (optional) -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').catch(()=>{});
    }
  </script>
</body>
</html>
